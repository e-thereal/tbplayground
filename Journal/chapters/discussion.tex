\section{Discussion}

% We have introduced a new method for the automatic segmentation of MS lesions
% based on convolutional encoder networks. The joint training of the feature
% extraction and prediction layers with a novel objective function allows for the
% automatic learning of features that are tuned for a given combination of image
% types and a segmentation task with very unbalanced classes. 

We have presented a new method for the automatic segmentation of MS lesions
based on deep convolutional encoder networks with shortcut connections.
The joint training of the feature extraction and prediction pathways allows for
the automatic learning of features at different scales that are tuned for a
given combination of image types and segmentation task. In addition, shortcuts
between the two pathways allow high- and low-level features to be leveraged at
the same time. We have evaluated our method on a large data set from an MS
clinical trial, with the results showing that our method is able to segment MS
%lesions with greater accuracy than
% TODO: find references if possible
% \todo[inline]{find references, if possible, but this might be difficult, because
% the range of DSC scores is very high.} with greater accuracy than most
% previously proposed automatic methods (cite some), most of which have reported
% Dice accuracies in the range of..., although the use of different data sets only
% allows an indirect comparison.
%
more accurately than
%
%In a specific comparison to
Lesion-TOADS, a widely used and freely available
method for the automatic segmentation of MS lesions.
%, our method produced substantial gains in accuracy, which 
The substantial gains in accuracy
are mostly due to the
 reduction of false positives, especially for low lesion loads where the lesion
size is also small. Overall, the CEN with shortcuts architecture performs
consistently well over a wide range of lesion loads. For future work, we are
planning to extend our comparison to other freely available lesion segmentation
tools such as the lesion growth algorithm \cite{schmidt2012automated} as
implemented in the LST toolbox (\url{www.statistical-modelling.de/lst.htm}).

The most significant limitation of the tested architecture is that very large
lesions can still extend beyond the receptive field of a particular voxel. This
reduces the network's ability to extract appearance features that would help the
identification of lesion voxels. For future work, we are planning to investigate
the use of deeper networks for increasing accuracy for very large lesions.
%
This work would require greater training times and a larger sample of scans with
high lesion loads, but we expect it to significantly improve the network's
ability to segment even very large lesions. In contrast to fully convolutional
networks and the u-net architecture, the size of the output segmentation of a
CEN is independent of the size of the receptive field, which allows us to design
networks that are able to learn features that cover large parts of the image, or
even global features that cover the entire image. Such features would be able to
estimate the global distribution of lesions and act as an automatically learned
lesion prior, further improving the robustness of our method.

% Extensions: global features, prior knowledge, different segmentation tasks

% We have presented a very flexible segmentation framework that can be easily
% extended. Depth for global features, include
% prior knowledge as channels, apply to different segmentation tasks.

Our segmentation framework is very flexible and can be easily extended. One such
extension could be to incorporate prior knowledge about the tissue type of each
non-lesion voxel into the segmentation procedure.
%
% Therefore, each image needs to be segmented into cerebrospinal fluid, gray
% matter, and white matter as part of the pre-processing pipeline.
%
The probabilities of each tissue class would be precomputed by a standard
segmentation method, after which they can be added as an additional channel to the input units of the CEN, which allows the
CEN to take advantage of intensity information from different modalities and
prior knowledge about the tissue class to carry out the segmentation.
%
%For example, we have observed the presence of false positives in
%the region of the ventricles in some rare cases. Knowledge about the extend of
%the vectricles can help to reduce this type of misclassification.
%
% However, the benefit from using a prior tissue classification depends on the
% accuracy of the segmentation algorithm. In the presence of lesions, a
% segmentation method that was designed for healthy tissue might misclassify
% regions affected by lesions, which in turn could confound the segmentation
% process.
In addition, our method can be applied to other segmentation tasks. Although we
have only focused on the segmentation of MS lesions in this paper, our method
does not make any assumptions specific to MS lesion segmentation. The features
required to carry out the segmentation are solely learned from training data,
which allows our method to be used to segment different types of pathology or to
perform structural segmentation when a suitable training set is available.
